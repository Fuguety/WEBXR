  <!doctype html>
  <html lang="en">
    <head>

      <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>

      <script src="https://cdn.jsdelivr.net/npm/aframe-simple-sun-sky@^1.2.2/simple-sun-sky.js"></script>
      <script src="https://unpkg.com/@c-frame/aframe-particle-system-component@1.2.x/dist/aframe-particle-system-component.min.js"></script>

      <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.6.0/dist/aframe-extras.min.js"></script>
      <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.3/dist/aframe-physics-system.min.js"></script>
      <script src="https://unpkg.com/aframe-physics-extras/dist/aframe-physics-extras.min.js"></script>


      <script src="https://unpkg.com/super-hands@^3.0.5/dist/super-hands.min.js"></script>
      <script src="https://unpkg.com/aframe-event-set-component@^4.1.1/dist/aframe-event-set-component.min.js"></script>




    <script>

        AFRAME.registerComponent('player-controls', 
            {
            init: function () {

            const el = this.el;
            const velocity = new THREE.Vector3();
            let isSprinting = false;
            let canJump = true;

              window.addEventListener('keydown', e => 
              {
                if (e.code === 'ShiftLeft')
                  {
                    isSprinting = true;
                    el.setAttribute('movement-controls', 'speed', 2);
                  }

                if (e.code === 'Space' && canJump)
                  
                {
                  canJump = false;
                  const startPos = el.getAttribute('position');
                  const jumpHeight = 3;

                  // go up
                  el.setAttribute('animation__jumpup', 
                  {
                      property: 'position',
                      to: `${startPos.x} ${startPos.y + jumpHeight} ${startPos.z}`,
                      dur: 300,
                      easing: 'easeOutQuad',
                      dir: 'alternate',
                      loop: 1
                  });

                  // cooldown
                  setTimeout(() => canJump = true, 600);
                  
                }

              });




            
            window.addEventListener('keyup', e => 
              {
                if (e.code === 'ShiftLeft') isSprinting = false;
              });

            el.addEventListener('componentchanged', evt => {
              if (evt.detail.name === 'movement-controls') 
              {
                // Adjust speed dynamically
                const speed = isSprinting ? 1 : 0.8;
                el.setAttribute('movement-controls', 'speed', speed);
              }
            });
          }

        });


        AFRAME.registerComponent('color-randomizer', 
        {
        play: function() 
        {
          this.el.addEventListener('drag-drop', function(evt) 
        {
          evt.detail.dropped.setAttribute('material', 'color',
            '#'+(Math.random()*0xFFFFFF<<0).toString(16))
           // notify super-hands that the gesture was accepted
          evt.preventDefault()
        })
      }
    })
    

      </script>



      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="icon" type="image/svg+xml" href="/vite.svg" />

      <title>Vite + TS</title>
    
    </head>
    
    <body>

      <a-scene renderer="antialias: true;
                        colorManagement: true
                        sortTransparentObjects: true"
              stats
              fog="type: linear; color: white; near: 1; far: 1000"
              physics="debug: true" xr-mode-ui="enabled: true; enterAREnabled: true; XRMode: ar;"
              >

          <a-assets>

              <img id="ground" crossorigin="anonymous" 
                  src="ground.jpg"></img>

              <img id="checker" crossorigin="anonymous"
                  src="https://thumbs.dreamstime.com/b/marble-checkerboard-floor-24539536.jpg">          
                  
              <img id="error" crossorigin="anonymous"
                  src="https://i.imgur.com/5NZ6T4X.png">

              <img id="grid" crossorigin="anonymous"
                  src="https://i.redd.it/godot-theme-prototype-textures-v0-pev67seeqtac1.png?width=512&format=png&auto=webp&s=93a766784649116e0ad867af9c42ed7c2118ae2e">

              <a-asset-item id="car-model" src="./public/001.glb"></a-asset-item>  

          </a-assets>


          <a-entity id="mixins">
        <a-mixin id="all-interactions"
                 hoverable grabbable stretchable draggable
                 event-set__hoveron="_event: hover-start; material.opacity: 0.7; transparent: true"
                 event-set__hoveroff="_event: hover-end; material.opacity: 1; transparent: false"
                 dynamic-body
        ></a-mixin>

        <a-mixin id="grab-move"
                 hoverable grabbable draggable
                 event-set__hoveron="_event: hover-start; material.opacity: 0.7; transparent: true"
                 event-set__hoveroff="_event: hover-end; material.opacity: 1; transparent: false"
                 dynamic-body
        ></a-mixin>

        <a-mixin id="physics-hands"
                 physics-collider phase-shift
                 collision-filter="collisionForces: false"
                 static-body="shape: sphere; sphereRadius: 0.02"
                 super-hands="colliderEvent: collisions;
                              colliderEventProperty: els;
                              colliderEndEvent: collisions;
                              colliderEndEventProperty: clearedEls;"
        ></a-mixin>
      </a-entity>

        <a-entity class="cube" mixin="cube all-interactions" position="0 1 -1" material="color: red"></a-entity>
              

        <!--
        <a-entity gltf-model="#car-model" position="-6 0 -1" scale="0.5 0.5 0.5"></a-entity>
        -->



        <!-- Ground Plane -->
        <a-plane  width="25" height="25"
                rotation="-90 0 0"
                material="src: #ground; repeat: 2 2; side: double"
                static-body
                >
        </a-plane>


          <!-- falling material -->
        <a-box class="cube" position="0 5 -3" width="2" height="3" depth="3"
            material="src: #grid; side: double" 
            dynamic-body>
        </a-box>
         
        <a-cone position="0 7 -3" radius="0.5" height="1" 
              rotation="-90 0 0"
              material="src: #grid; side: double" 
              dynamic-body>
        </a-cone>



        <!-- WASD + physics body -->
        <a-entity id="player"
                  movement-controls="speed: 0.8"
                  player-controls
                  position="0 1.6 0"
                  kinematic-body="radius: 0.3; height: 1.6">
          \
          <a-entity camera look-controls></a-entity>

          <!--hands -->
          
          <a-entity sphere-collider="objects: a-box" super-hands hand-controls="hand: left"></a-entity>
          <a-entity sphere-collider="objects: a-box" super-hands hand-controls="hand: right"></a-entity>
          
          
          <a-entity id="rhand" mixin="physics-hands"
                    hand-controls="hand: right">
          </a-entity>
          <a-entity id="lhand" mixin="physics-hands"
                    hand-controls="hand: left">
          </a-entity>


        </a-entity>




        <a-entity id="environment">

          <!-- rain -->
          <a-entity id="rain" particle-system="preset: rain; color: #24CAFF; particleCount: 500"></a-entity>

          <!-- Sun -->
          <a-simple-sun-sky sun-position="5 7 -5"></a-simple-sun-sky>
          <a-light id="dirlight" intensity="1" light="castShadow:true;type:directional" position="0 1 -5"></a-light>



          <a-entity id="light" light="type: ambient; color: #888"></a-entity>



          <!-- shadows -->
          <a-light type="directional" light="castShadow:true;" position="5 7 -5" intensity="1" shadow-camera-automatic="#objects"></a-light>
          <a-entity light="type: hemisphere; color: green; groundColor: green; intensity: 2"></a-entity>


          <!-- Ocean -->
          <a-entity id="ocean" ocean="density: 10; width: 25; depth: 25; speed: 4"
            material="color: #9CE3F9; opacity: 0.75; metalness: 0; roughness: 1 shader:ocean"
            position="0 0 -24"
            rotation="-90 0 0"></a-entity>
        
        </a-entity>

        



        <a-entity id="test-entities">
              <!-- Test entity 1 -->
              <a-entity id="test" geometry="primitive: box; width: 2; height: 1; depth: 1;"
                material="color: yellow; metalness: 1; roughness: 0.5;"
                position="0 0.15 -20"
                light="type: point; intensity: 5"
                animation="property: position; easing: easeInOutQuad; dir: alternate; dur: 1000; to: 0 -0.10 -20; loop: true"
                rotation="75 5 40"
                >

              <a-text value="$90,312.23"
                position="0 2 0"
                color="red"
                align="center"
                side="double"></a-text>

              </a-entity>



              <!-- Test entity 2 -->
              <a-entity id="test2" geometry="primitive: sphere; radius: 1.8;"
                material="color: red; metalness: 1; roughness: 0.5;"
                position="4 -0.15 -20"
                animation="property: position; easing: easeInOutQuad; dir: alternate; dur: 1000; to: 4 0.10 -20; loop: true"
                >
                <a-text value="undefined"
                position="0 2 0"
                color="black"
                align="center"
                side="double"></a-text>
              </a-entity>



              <!-- Test entity 3  Moving Box-->
              <a-box
                position="-10 1 -10"
                width="1" height="1" depth="1"
                material="src: #error; side: double"
                animation="property: position; to: 10 1 -10; dur: 3000; easing: linear; dir: alternate; loop: true"
                >
                <a-text value="Moving Box" align="center" position="0 1 0" side="double"></a-text>
              </a-box>

        </a-entity>


        <a-entity id="pool" position="0 0 17.5">

          <a-text value="Physics pool" align="center" position="0 4 0" side="double" rotation="0 180 0" scale="2" color="black"></a-text>

        <a-entity id="objects">
          <!-- Falling objects -->
          <a-sphere radius="1" height="0.5" 
                    material="src: #error; side: double"
                    position="0 1 0"
                    dynamic-body
                    >
          </a-sphere>

          <a-sphere radius="0.4" height="0.3" 
                    material="src: #error; side: double"
                    position="0 2 -1"
                    dynamic-body
                    >
          </a-sphere>

          <a-sphere radius="0.7" height="0.2" 
                    material="src: #error; side: double"
                    position="0 3 0"
                    dynamic-body
                    >
          </a-sphere>


          <a-cone position="1 7 -3" radius="0.5" height="1" 
                rotation="-90 0 0"
                material="src: #error; side: double" 
                dynamic-body>
          </a-cone>

          <a-cone position="1 7 0" radius="0.5" height="1" 
                rotation="-90 0 0"
                material="src: #error; side: double" 
                dynamic-body>
          </a-cone>

            <a-box
              position="-3 -1 0"
              width="1" height="1" depth="1"
              material="src: #error; side: double"
              animation="property: position; to: 3 -1 -5;  dur: 3000; easing: linear; dir: alternate; loop: true"
              >
              <a-text value="Moving Box" align="center" position="0 1 0" side="double" rotation="0 180 0"></a-text>
            </a-box>
          </a-entity>


          <a-entity id="pool-enclosure">
              <!-- Floor -->
              <a-plane width="10" height="10"
                      position="0 -2 0"
                      rotation="-90 0 0"
                      material="src: #checker; repeat: 10 10; side: double"
                      static-body>
              </a-plane>

              <!-- Walls -->
              <!-- Back wall -->
              <a-plane width="10" height="2.5"
                      position="0 -1 -5"
                      rotation="0 0 0"
                      material="src: #grid; repeat: 4 4; side: double"
                      static-body>
              </a-plane>

              <!-- Front wall -->
              <a-plane width="10" height="4"
                      position="0 0 5"
                      rotation="0 180 0"
                      material="src: #grid; repeat: 4 4; side: double"
                      static-body>
              </a-plane>

              <!-- Left wall -->
              <a-plane width="10" height="4"
                      position="-5 0 0"
                      rotation="0 90 0"
                      material="src: #grid; repeat: 4 4; side: double"
                      static-body>
              </a-plane>

              <!-- Right wall -->
              <a-plane width="10" height="4"
                      position="5 0 0"
                      rotation="0 -90 0"
                      material="src: #grid; repeat: 4 4; side: double"
                      static-body>
              </a-plane>
          </a-entity>
        </a-entity>


        <a-entity id="dark room" position="17.5 0 0">

          <a-text value="Dark room" align="center" position="-5 3 0" side="double" rotation="0 -90 0" scale="2" color="white"></a-text>
          <a-text value="HOW BIG IS THE LIMIT OF THIS STRING, SOMEONE PLEASE HELP ME I DONT KNOW WHAT ELSE TO PUT HERE AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA APARENTLY THE TEXT HAS A LENGH LIMIT BY DEFAULT, WOOOOW!!! SO COOL RIGHT??? \n\n NO :(" align="center" position="5 2 0" side="double" rotation="0 -90 0" scale="1" color="#ff69b4"></a-text>


          <a-entity light="type: point; color: #0ff; intensity: 5; distance: 15"
          position="0 1 0">
              <a-box
                depth="1" height="1" width="1"
                material="color: #111; emissive: #0ff; emissiveIntensity: 5; side: double"
                visible="true">
              </a-box>
          </a-entity>


          <a-sphere position="0 1.5 3" radius="1"
                    material="color: white; metalness: 1; roughness: 0">
          </a-sphere>
          <a-box position="-2 1.5 -3" depth="1" height="1" width="1"
                material="color: gray; metalness: 0; roughness: 1">
          </a-box>

        <a-entity id="room-enclosure">
              <!-- Floor -->
              <a-plane width="10" height="10"
                      position="0 0 0"
                      rotation="-90 0 0"
                      material="color: #000; side: double; shader: flat;"
                      static-body>
              </a-plane>

              <!-- Back wall -->
              <a-plane width="10" height="4"
                      position="0 1.5 -5"
                      rotation="0 0 0"
                      material="color: #000; side: double; shader: flat;"
                      static-body>
              </a-plane>

              <!-- Front wall -->
              <a-plane width="10" height="4"
                      position="0 1.5 5"
                      rotation="0 180 0"
                      material="color: #000; side: double; shader: flat;"
                      static-body>
              </a-plane>


              <!-- Right wall -->
              <a-plane width="10" height="4"
                      position="5 1.5 0"
                      rotation="0 -90 0"
                      material="color: #000; side: double; shader: flat;"
                      static-body>
              </a-plane>

              <!-- Roof -->
              <a-plane width="10" height="10"
                      position="0 3.5 0"
                      rotation="90 0 0"
                      material="color: #000; side: double; shader: flat;"
                      static-body>
              </a-plane>

        </a-entity>

      
      
        </a-entity>




        <!-- Memes gallery -->
         <a-entity>
            <a-plane width="5" height="4"
                          position="-12.5 3 0"
                          rotation="0 90 0"
                          material="src: https://i.ytimg.com/vi/g_Y9ZV-y3bM/maxresdefault.jpg; side: double"
                          static-body>
            </a-plane>

            
            <a-plane width="5" height="4"
                          position="-12.5 3 -5.5"
                          rotation="0 90 0"
                          material="src: https://gaming.lenovo.com/emea/attachment.php?attachmentid=2968; side: double"
                          static-body>
            </a-plane>


            
            <a-plane width="5" height="4"
                          position="-12.5 3 5.5"
                          rotation="0 90 0"
                          material="src: https://i.guim.co.uk/img/media/dd3882c4ad0fd11a14cffc7e5edaabe5ce8a8b53/0_85_1077_646/master/1077.jpg?width=445&dpr=1&s=none&crop=none; side: double"
                          static-body>
            </a-plane>


            <a-plane width="5" height="4"
              position="0 5 -5"
              rotation="0 0 0"
              material="src: https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4TI7MkyHxrye7TYcPsjI_Q9k6o8UPbTwOOe6rQJHEqQQZuqaMK0GJzJxRZR-ZLZu5ybI&usqp=CAU; side: double"
              static-body>
            </a-plane>
        </a-entity>
        

      </a-scene>

    </body>


  </html>

